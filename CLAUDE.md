# Claude Code Development Guidelines

## 🚀 プロダクション環境での開発方針

このプロジェクトでは、**ローカル開発・テストを一切行わず**、すべての開発・検証を**Vercelプロダクション環境**で実施します。

### 📋 重要な開発ルール

#### ❌ 禁止事項
- **ローカル環境での開発・テスト**: `npm run dev`、`supabase start`等のローカル実行は禁止
- **ローカルデータベース**: ローカルSupabaseインスタンスの使用禁止
- **ローカルマイグレーション**: `supabase db reset`等のローカル環境でのマイグレーション禁止
- **ローカルシード**: ローカル環境でのシードデータ投入禁止

#### ✅ 必須事項
- **プロダクション環境のみ**: 全ての開発・検証はVercelにデプロイして実施
- **プロダクションデータベース**: Supabaseプロダクション環境のみ使用
- **直接マイグレーション**: プロダクションデータベースに直接マイグレーション実行
- **本番データ検証**: プロダクション環境でのデータ確認・検証

### 🗄️ データベース設定

#### プロダクション環境接続情報
```
Database URL: postgresql://postgres:j&yrF9U!7dBq&p&@db.pgycxpxgozgqlgboafqe.supabase.co:5432/postgres
Project ID: pgycxpxgozgqlgboafqe
Project Name: rebase369_test
```

#### マイグレーション手順

**⚠️ 重要**: マイグレーションファイルは既にプロダクション環境に適用済みです。必要なのは**シードデータの投入のみ**です。

##### 方法1: Supabase Studio（推奨）
1. **Supabase Studioにアクセス**
   - URL: https://supabase.com/dashboard/project/pgycxpxgozgqlgboafqe
   - Project: rebase369_test

2. **SQL Editorでシードデータを実行**
   - 左メニューから「SQL Editor」を選択
   - 「supabase/seed.sql」の内容をコピー＆ペースト
   - 「Run」ボタンでシードデータを実行

##### 方法2: psql直接接続（代替手段）
```bash
# プロダクション環境に直接psqlで接続
psql "postgresql://postgres:j&yrF9U!7dBq&p&@db.pgycxpxgozgqlgboafqe.supabase.co:5432/postgres"

# シードデータをプロダクション環境に直接投入
\i supabase/seed.sql
```

##### 適用されるデータ
- **部屋データ**: 12部屋（2F: 5部屋、3F: 7部屋）
- **料金データ**: 料金表画像に基づく正確な料金設定
- **オプションデータ**: 食事・施設・備品の料金設定
- **サンプル予約**: 5件（関西大学2件、株式会社テックソリューション3件）
- **期間**: 2025年6月-7月の予約データ
- **ステータス**: 全て「Board未同期」として作成

### 🔧 開発フロー

#### Claude Codeでの実装手順
1. **コード変更**: ローカルでファイル編集のみ実行
2. **コミット・プッシュ**: GitHubにコミット
3. **Vercelデプロイ**: 自動デプロイによる本番環境反映
4. **プロダクション検証**: 本番環境でのみ動作確認
5. **データベース操作**: プロダクション環境に直接実行

#### データベース操作の考慮事項
- **本番データの保護**: 既存データの保護を最優先
- **バックアップ確認**: 重要な変更前はSupabase管理画面でバックアップ確認
- **段階的適用**: 大きな変更は段階的に適用
- **エラー対応**: エラー発生時は即座にSupabase管理画面で確認

### 🎯 この方針の理由
- **本番環境での確実性**: ローカル環境とプロダクション環境の差異をゼロに
- **迅速な開発サイクル**: ローカル環境構築・同期の手間を排除
- **リアルな検証**: 実際のユーザー環境と同じ条件での検証
- **運用の簡潔性**: 単一環境での管理による運用負荷軽減

### ⚠️ 注意事項
- **プロダクションデータの慎重な扱い**: 本番データベースに直接操作するため、十分な注意が必要
- **変更の可逆性**: 重要な変更は必ず元に戻せる手順を確認してから実行
- **エラー監視**: Vercel・Supabaseの管理画面で常にエラー状況を監視